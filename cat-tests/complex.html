<html>
<head>
    <meta http-equiv="Content-Type" content="text/plain; charset=utf-8">
    <meta name="x-cat-tags" content="anyStock actualBugJson actualBugXml "/>

    <script src="../../libs/closure-library/closure/goog/base.js"></script>
    <script src="../../src/deps.js"></script>
    <link href="../../out/anychart-ui.min.css" type="text/css" rel="stylesheet">
    <script>
      goog.require("anychart.bundle.entry");
      goog.require("anychart.themes.defaultTheme.entry");
      window.ACDVF = true;
    </script>
    <script src="utils/anytest.min.js"></script>


</head>
<body>
<div id="container"></div>
</body>
<script>
  var chart;
  anychart.onDocumentLoad(function () {
    anytest.setUp();

    var dataTable = anychart.data.table();
    dataTable.addData([
      ['2004-01-02', 2011.08, 2022.37, 1999.77, 2006.6801, 1666780032],
      ['2004-01-05', 2020.78, 2047.36, 2020.78, 2047.36, 2362909952],
      ['2004-01-06', 2044.55, 2061.54, 2039.63, 2057.3701, 2273220096],
      ['2004-01-07', 2056.75, 2078.0901, 2047.02, 2077.6799, 2294279936],
      ['2004-01-08', 2089.6001, 2100.25, 2078.05, 2100.25, 2683950080],
      ['2004-01-09', 2083.6399, 2113.3301, 2077.0901, 2086.9199, 2482759936],
      ['2004-01-12', 2093.54, 2112.52, 2085.1499, 2111.78, 2284009984],
      ['2004-01-13', 2113.1101, 2114.9099, 2080.29, 2096.4399, 2385700096],
      ['2004-01-14', 2104.29, 2111.73, 2094.3201, 2111.1299, 2099970048],
      ['2004-01-15', 2101.8601, 2121.6101, 2088.1001, 2109.0801, 2235589888],
      ['2004-01-16', 2126.1201, 2140.47, 2119.3501, 2140.46, 2614390016],
      ['2004-01-20', 2149.03, 2149.8501, 2130.2, 2147.98, 2574190080],
      ['2004-01-21', 2139.3301, 2150.1101, 2120.2, 2142.45, 2421860096],
      ['2004-01-22', 2146.3201, 2152.1201, 2119.01, 2119.01, 2353370112],
      ['2004-01-23', 2124.76, 2138.4099, 2108.45, 2123.8701, 2253910016],
      ['2004-01-26', 2120.5601, 2153.8301, 2115.3401, 2153.8301, 1946050048],
      ['2004-01-27', 2148.05, 2152.75, 2116.04, 2116.04, 2151259904],
      ['2004-01-28', 2125.02, 2128, 2073.1499, 2077.3701, 2319549952],
      ['2004-01-29', 2085.54, 2087.3301, 2041.0699, 2068.23, 2637760000],
      ['2004-01-30', 2068.3601, 2078.8799, 2058.54, 2066.1499, 1931180032]
    ]);

    var mapping = dataTable.mapAs({'value': 2});
    var ohlcMapping = dataTable.mapAs({'open': 1, 'high': 2, 'low': 3, 'close': 4});

    chart = anychart.stock();

    var firstPlot = chart.plot(0);
//    firstPlot.bounds(0, 0, "100%", "45%");

    firstPlot.column(mapping);

//    var secondPlot = chart.plot(1);

//    secondPlot.width("100%");
//    secondPlot.height("45%");
//    secondPlot.top("50%");

//    secondPlot.ohlc(ohlcMapping);

//    chart.plot(0).xAxis().showHelperLabel(false);

    chart.selectRange('2004-01-24', '2004-01-30');
    chart.crosshair().yLabel(false);

//    anytest.asserts.equal(chart.toCsv(),
//        'x,Series 0,Series 0 (open),Series 0 (high),Series 0 (low),Series 0 (close)\n' +
//        '2004-01-02T00:00:00.000,2022.37,2011.08,2022.37,1999.77,2006.6801\n' +
//        '2004-01-05T00:00:00.000,2047.36,2020.78,2047.36,2020.78,2047.36\n' +
//        '2004-01-06T00:00:00.000,2061.54,2044.55,2061.54,2039.63,2057.3701\n' +
//        '2004-01-07T00:00:00.000,2078.0901,2056.75,2078.0901,2047.02,2077.6799\n' +
//        '2004-01-08T00:00:00.000,2100.25,2089.6001,2100.25,2078.05,2100.25\n' +
//        '2004-01-09T00:00:00.000,2113.3301,2083.6399,2113.3301,2077.0901,2086.9199\n' +
//        '2004-01-12T00:00:00.000,2112.52,2093.54,2112.52,2085.1499,2111.78\n' +
//        '2004-01-13T00:00:00.000,2114.9099,2113.1101,2114.9099,2080.29,2096.4399\n' +
//        '2004-01-14T00:00:00.000,2111.73,2104.29,2111.73,2094.3201,2111.1299\n' +
//        '2004-01-15T00:00:00.000,2121.6101,2101.8601,2121.6101,2088.1001,2109.0801\n' +
//        '2004-01-16T00:00:00.000,2140.47,2126.1201,2140.47,2119.3501,2140.46\n' +
//        '2004-01-20T00:00:00.000,2149.8501,2149.03,2149.8501,2130.2,2147.98\n' +
//        '2004-01-21T00:00:00.000,2150.1101,2139.3301,2150.1101,2120.2,2142.45\n' +
//        '2004-01-22T00:00:00.000,2152.1201,2146.3201,2152.1201,2119.01,2119.01\n' +
//        '2004-01-23T00:00:00.000,2138.4099,2124.76,2138.4099,2108.45,2123.8701\n' +
//        '2004-01-26T00:00:00.000,2153.8301,2120.5601,2153.8301,2115.3401,2153.8301\n' +
//        '2004-01-27T00:00:00.000,2152.75,2148.05,2152.75,2116.04,2116.04\n' +
//        '2004-01-28T00:00:00.000,2128,2125.02,2128,2073.1499,2077.3701\n' +
//        '2004-01-29T00:00:00.000,2087.3301,2085.54,2087.3301,2041.0699,2068.23\n' +
//        '2004-01-30T00:00:00.000,2078.8799,2068.3601,2078.8799,2058.54,2066.1499');
    anytest.drawInStage(chart);

    anytest.stageListen(function () {
      /*anytest.step(function () {
        anytest.CAT.getScreen();
      });
      anytest.step(function () {
        anytest.CAT.action(239, 78, 'mousemove');
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.getScreen('chartCrosshairYlabelFalse', -1);
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.action(5,5,'mousemove');
        chart.plot(0).crosshair().yLabel(false);
      });
      anytest.step(function () {
        anytest.CAT.action(239, 78, 'mousemove');
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.getScreen('plotCrosshairYlabelFalse', 1, 'chartCrosshairYlabelFalse');
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.action(5,5,'mousemove');
        chart.plot(0).crosshair().yLabel(true);
        chart.crosshair().xLabel(false);
      });
      anytest.step(function () {
        anytest.CAT.action(239, 78, 'mousemove');
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.getScreen('chartCrosshairXlabelFalse', -1);
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.action(5,5,'mousemove');
        chart.plot(1).crosshair().xLabel(false);
      });
      anytest.step(function () {
        anytest.CAT.action(239, 78, 'mousemove');
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.getScreen('plotCrosshairXlabelFalse', 1, 'chartCrosshairXlabelFalse');
      }, 1, 100);
      anytest.step(function () {
        anytest.CAT.action(0,0,'mousemove');
      });
      anytest.step(function () {
        chart.plot(0).crosshair().yLabel(false);
        chart.plot(1).crosshair().xLabel(true); // нельзя вернуть начальное состояние - inheritance так работает
        anytest.CAT.getScreen('backToInitialState', 1);
      });*/
      anytest.exit();
    });
//        anytest.createPanel('interactive');
    stage.resume();
  });
</script>
</html>