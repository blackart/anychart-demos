<html>
<head><meta http-equiv="Content-Type" content="text/plain; charset=utf-8">
    <meta name="x-cat-tags" content="cartesian labels anyChart actualBugResize actualBugJson actualBugXml annotations"/>

    <script src="../../libs/closure-library/closure/goog/base.js"></script>
    <script src="../../src/deps.js"></script>
    <link href="../../out/anychart-ui.min.css" type="text/css" rel="stylesheet">
    <script>
      goog.require("anychart.bundle.entry");
      goog.require("anychart.themes.defaultTheme.entry");
      window.ACDVF = true;
    </script>
    <script src="utils/anytest.min.js"></script>



    <script src="http://cat.anychart.com/static/sessions/15879/branch/out/local-cdn/msft-daily-short.js" data-export="true"></script>
</head>
<body>
<div id="container"></div>
</body>
<script type="text/javascript">
  var chart, formatLabels1, ann1;
  anychart.onDocumentLoad(function() {
    anytest.setUp(400, 400);
    var dataTable = anychart.data.table();
    dataTable.addData(get_msft_daily_short_data());
    var mapping = dataTable.mapAs({"value": 4});
    chart = anychart.stock();

    var plot = chart.plot(0);
    var lineSeries = plot.line(mapping);
    lineSeries.name("MSFT");

    formatLabels1 = function() {
      return this.rawLevelValue.toFixed(3)
    };
    chart.plot(0).crosshair(false);
    chart.listenOnce("click", function(){
      ann1 = chart.plot().annotations().startDrawing({
        type: "fibonacci-arc",
        fill: "#4CAF50 0.5",
        stroke: "3 #E666FF",
        labels: {
          format: formatLabels1,
          anchor: 'left-bottom'
        }
      });
    });
    anytest.drawInStage(chart);

    anytest.stageListen(function () {
      // anytest.step(function () {
      //   anytest.CAT.getScreen();
      // });
      // anytest.step(function () {
      //   anytest.CAT.action(153, 75, 'click');
      // });
      // anytest.step(function(){
      //   anytest.CAT.getScreen('firstClick', -1);
      // });
      // anytest.step(function () {
      //   anytest.CAT.action(153, 75, 'click');
      // });
      // anytest.step(function(){
      //   anytest.CAT.getScreen('secondClick', -1, 'firstClick');
      // });
      // anytest.step(function () {
      //   anytest.CAT.action(300, 300, 'mousemove');
      // });
      // anytest.step(function(){
      //   anytest.CAT.getScreen('mouseMoveToPoint', -1, 'secondClick');
      // });
      // anytest.step(function () {
      //   anytest.CAT.action(300, 300, 'click');
      // });
      // anytest.step(function(){
      //   anytest.CAT.getScreen('finishAnn1', 1, 'mouseMoveToPoint');
      // });
      // anytest.step(function(){
      //   ann1.labels().format('{%level}');
      //   anytest.CAT.getScreen('labelsFormatlevel', -1);
      // });
      // anytest.step(function(){
      //   ann1.labels().format('{%rawLevelValue}{decimalsCount:3, zeroFillDecimals: true}');
      //   anytest.CAT.getScreen('labelsFormat', 1, 'finishAnn1');
      // });
      // anytest.step(function () {
      //   anytest.CAT.action(10, 10, 'click');
      // });
      // anytest.step(function () {
      //   chart.annotations().cancelDrawing();
      // });
      // anytest.step(function(){
      //   chart.annotations().removeAllAnnotations();
      //   anytest.CAT.getScreen('backToInitialState', 1);
      // });
      anytest.exit();
    }).charts4modes("chart");
//        anytest.createPanel('interactive');
    stage.resume();
    /*<< methods
     anychart.core.ChartWithAxes.annotations
     anychart.core.annotations.PlotController.startDrawing
     anychart.core.annotations.PlotController.cancelDrawing
     anychart.core.annotations.PlotController.getAnnotationAt
     >>*/
  });
</script>
</html>